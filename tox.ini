[tox]
envlist = py310, py311, py312, py313, pypy310, pypy311, py314-full, lint, typecheck
isolated_build = True
skip_missing_interpreters = True
parallel_show_output = True

[testenv]
passenv = 
    CI
    GITHUB_*
    PYTHONPATH
deps =
    pytest>=8.0.0
    pytest-cov>=6.0.0
    pytest-xdist>=3.5.0
    ruff>=0.3.0
    mypy>=1.0.0
    types-setuptools

allowlist_externals = 
    pytest
    ruff
    mypy

commands =
    pytest --cov=json2xml --cov-report=xml:coverage/reports/coverage.xml --cov-report=term -xvs {posargs:tests} -n auto

[testenv:lint]
deps = 
    ruff>=0.3.0
commands =
    ruff check json2xml tests

[testenv:typecheck]
deps =
    mypy>=1.0.0
    types-setuptools
commands =
    mypy json2xml tests

[testenv:py314-full]
deps =
    {[testenv]deps}
commands =
    {[testenv]commands}
    ruff check json2xml tests
    mypy json2xml tests

[pytest]
testpaths = tests
python_files = test_*.py
